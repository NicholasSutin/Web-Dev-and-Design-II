<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic SVG Text Path - Centered Safe Shift</title>
  <style>
    body {
      height: 100vh;
      margin: 0;
      overflow: hidden;
      display: grid;
      place-items: center;
      background-color: #000;
      color: #fff;
    }

    svg {
      width: 100vw;
      height: auto;
      overflow: visible;
    }

    .dynamic-text {
      font-family: 'Times New Roman', Times, serif;
      font-size: 4rem;
      font-weight: normal;
      fill: #fff;
      letter-spacing: -0.02em;
      text-anchor: middle; /* centers text along path */
    }

    .dynamic-path {
      stroke: red;
      stroke-width: 2px;
      fill: none;
      width:100%;
    }

    #line1-text .smiley {
      font-size: 0.8em;
      vertical-align: middle;
    }

    #line1-group { transform: translateY(-40px); }
    #line2-group { transform: translateY(0px); }
    #line3-group { transform: translateY(40px); }
  </style>
</head>
<body>

<svg viewBox="0 0 1800 300">
  <!-- Curvy paths -->
  <path id="path-line1" class="dynamic-path" d="M 50 100 L 950 100" />
  <path id="path-line2" class="dynamic-path" d="M 50 150 L 950 150" />
  <path id="path-line3" class="dynamic-path" d="M 50 200 L 950 200" />

  <!-- Text on paths, initially centered -->
  <g id="line1-group">
    <text id="line1-text" class="dynamic-text">
      <textPath href="#path-line1" startOffset="50%">
        <tspan class="smiley">☺</tspan> Hi, I'm Nick <tspan class="smiley">☺</tspan>
      </textPath>
    </text>
  </g>

  <g id="line2-group">
    <text id="line2-text" class="dynamic-text">
      <textPath href="#path-line2" startOffset="50%">
        I'm a student and artist of various mediums
      </textPath>
    </text>
  </g>

  <g id="line3-group">
    <text id="line3-text" class="dynamic-text">
      <textPath href="#path-line3" startOffset="50%">
        currently based in the New York/Fairfield area
      </textPath>
    </text>
  </g>
</svg>

<script>
  const paths = [
    document.getElementById('path-line1'),
    document.getElementById('path-line2'),
    document.getElementById('path-line3'),
  ];

  const textPaths = [
    document.querySelector('#line1-text textPath'),
    document.querySelector('#line2-text textPath'),
    document.querySelector('#line3-text textPath'),
  ];

  const pathWidth = 1700;
  const startX = 50;
  const bases = [80, 150, 220];
  const maxBend = 60;
  const maxShiftPercent = 20;

  function updatePaths(mouseXPercent = 0.5, mouseYPercent = 0.5) {
    const distanceToCenter = Math.abs(mouseYPercent - 0.5) * 2;
    const bendAmount = distanceToCenter * maxBend;
    const direction = mouseYPercent > 0.5 ? -1 : 1;

    const segWidth = pathWidth / 4;

    // ---- PATH BENDING ----
    paths.forEach((path, i) => {
      const baseY = bases[i];

      const x1 = startX;
      const x2 = startX + segWidth;
      const x3 = startX + segWidth * 2;
      const x4 = startX + segWidth * 3;
      const x5 = startX + pathWidth;

      const y1 = baseY;
      const y2 = baseY + bendAmount * direction;
      const y3 = baseY - bendAmount * direction;
      const y4 = baseY + bendAmount * direction;
      const y5 = baseY;

      const d = `
        M ${x1} ${y1}
        C ${x1 + segWidth/2} ${y1}, ${x1 + segWidth/2} ${y2}, ${x2} ${y2}
        C ${x2 + segWidth/2} ${y2}, ${x2 + segWidth/2} ${y3}, ${x3} ${y3}
        C ${x3 + segWidth/2} ${y3}, ${x3 + segWidth/2} ${y4}, ${x4} ${y4}
        C ${x4 + segWidth/2} ${y4}, ${x4 + segWidth/2} ${y5}, ${x5} ${y5}
      `;

      path.setAttribute('d', d);
    });

    // ---- TEXT SHIFTING RELATIVE TO CENTER (SAFE) ----
    textPaths.forEach((tp, i) => {
      const bbox = tp.getBBox();
      const pathLength = paths[i].getTotalLength();
      const safeShift = Math.min(maxShiftPercent, (pathLength - bbox.width) / 2 / pathLength * 100);

      let shift = (mouseXPercent - 0.5) * 2 * safeShift;

      // invert middle line (line 2)
      if (i === 1) shift *= -1;

      tp.setAttribute("startOffset", `${50 + shift}%`);
    });
  }

  // initialize on page load
  window.addEventListener('load', () => updatePaths(0.5, 0.5));

  // update on mouse move
  window.addEventListener('mousemove', (event) => {
    const mouseXPercent = event.clientX / window.innerWidth;
    const mouseYPercent = event.clientY / window.innerHeight;
    updatePaths(mouseXPercent, mouseYPercent);
  });
</script>


</body>
</html>
